var NewUI=function(t){this.init(t)};NewUI.prototype.extend=function(){var t,e,n,i,s,a,o=arguments[0]||{},r=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[r]||{},r++),"object"==typeof o||$.isFunction(o)||(o={}),r===l&&(o=this,r--);r<l;r++)if(null!=(t=arguments[r]))for(e in t)n=o[e],o!==(i=t[e])&&(c&&i&&($.isPlainObject(i)||(s=$.isArray(i)))?(s?(s=!1,a=n&&$.isArray(n)?n:[]):a=n&&$.isPlainObject(n)?n:{},o[e]=$.extend(c,a,i)):void 0!==i&&(o[e]=i));return o},NewUI.prototype.getById=function(){return document.querySelector(name)},NewUI.prototype.getByClassName=function(t){return document.querySelectorAll("."+this.className+t)},NewUI.prototype.hasClass=function(t,e){return t.getAttribute("class").indexOf(e)>=0},NewUI.prototype.addClass=function(t,e){t.getAttribute("class");return!this.hasClass(t,e)&&(t.classList.add(e),!0)},NewUI.prototype.removeClass=function(t,e){t.getAttribute("class");return this.hasClass(t,e)?(t.classList.remove(e),!0):(console.warn(t+"不包含"+e),!1)},NewUI.prototype.children=function(t,e){var n=t.childNodes,i=[];return e.indexOf("#")>=0&&n.forEach(function(t){if(1===t.nodeType&&t.getAttribute("id").indexOf(e)>=0)return t}),n.forEach(function(t){1===t.nodeType&&(e.indexOf(".")>=0?t.getAttribute("class").indexOf(e.replace(".",""))>=0&&i.push(t):t.tagName.toLowerCase()==e&&i.push(t))}),i},NewUI.prototype.prev=function(t){for(;(t=t.previousSibling)&&1!==t.nodeType;);return t},NewUI.prototype.getElement=function(t){if(t)return t.indexOf("#")>=0?document.querySelector(t):document.querySelectorAll(t)},NewUI.prototype.template=function(){for(var t,e,n=["var r=[];\nvar _html = function (str) { return str.replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/'/g, '&#39;').replace(/</g, '&lt;').replace(/>/g, '&gt;'); };"],i=/\{\s*([a-zA-Z\.\_0-9()]+)(\s*\|\s*safe)?\s*\}/m,s=function(t){n.push("r.push('"+t.replace(/\'/g,"\\'").replace(/\n/g,"\\n").replace(/\r/g,"\\r")+"');")};e=i.exec(tpl);)e.index>0&&s(tpl.slice(0,e.index)),e[2]?n.push("r.push(String(this."+e[1]+"));"):n.push("r.push(_html(String(this."+e[1]+")));"),tpl=tpl.substring(e.index+e[0].length);s(tpl),n.push("return r.join('');"),t=new Function(n.join("\n")),this.render=function(e){return t.apply(e)}},NewUI.prototype.ajax=function(t){function e(t){t.type=(t.type||"GET").toUpperCase(),t.data=function(t){var e=[];for(var n in t)e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.push("v="+Math.floor(1e4*Math.random()+500)),e.join("&")}(t.data);var e=null;(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObjcet("Microsoft.XMLHTTP")).onreadystatechange=function(){if(4==e.readyState){var n=e.status;if(n>=200&&n<300){var i="",s=e.getResponseHeader("Content-type");i=-1!==s.indexOf("xml")&&e.responseXML?e.responseXML:"application/json"===s?JSON.parse(e.responseText):e.responseText,t.success&&t.success(i)}else t.error&&t.error(n)}},"GET"==t.type?(e.open(t.type,t.url+"?"+t.data,!0),e.send(null)):(e.open(t.type,t.url,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e.send(t.data))}(t=t||{}).data=t.data||{};var e=t.jsonp?jsonp(t):e(t)},NewUI.prototype.tpl=function(t){return{tfoot:function(){return'<div class="NewUI-Grid-tfoot"><div class="NewUI-Grid-Page"><div class="NewUI-Grid-PageSize"><label>每页</label><select class="NewUI-Grid-PageSize"><option value="10">10</option><option value="100">100</option><option value="1000">1000</option><option value="10000">10000</option></select><label>条</label></div><div class="NewUI-Grid-Goto"><div class="NewUI-Grid-Goto-left"><i class="fa fa-angle-double-left"></i><i class="fa fa-angle-left"></i></div><div class="NewUI-Grid-Goto-content"><label>第</label><input type="text" name="ts" autocomplete="off"><label>页</label><label class="NewUI-Grid-Goto-pageAll">共0页</label></div><div class="NewUI-Grid-Goto-right"><i class="fa fa-angle-double-right"></i><i class="fa fa-angle-right"></i></div></div><div class="NewUI-Grid-refresh"><i class="fa fa-refresh"></i></div></div><div class="NewUI-Grid-detail"><label>显示</label><label class="NewUI-Grid-detail-show">-</label><label>共</label><label class="NewUI-Grid-detail-number">0</label><label>条</label></div></div>'},get:function(t){var e=this,n="_"+t;if(!e[n]){if("function"!=typeof e[t])throw new Error("找不到对应模板");e[n]=e[t]}return e[n]}}.get(t)()},NewUI.prototype.attr=function(){var t=arguments;t.length>2?t[0].setAttribute(t[1],t[2]):Object.keys(t[1]).forEach(function(e,n){t[0].setAttribute(e,t[1][e])})},NewUI.prototype.getGrid=function(t){var e=this,n=function(){this.element=t?e.getElement(t):e.getElement("."+e.className+"Grid")[0],this.config={isPage:!1,pageSize:[50,500,5e3],firstPage:0,refresh:!0,toolTpl:!1},this.columns=[],this._config={}};return n.prototype.init=function(t){e.extend(this.config,t.config),e.extend(this.columns,t.columns),this._thead(),this._tbody([{name:"1"},{name:"2"},{name:"3"},{name:"4"}])},n.prototype._thead=function(){var t="Grid-thead-"+(new Date).getTime(),n=document.createElement("div");e.attr(n,{class:e.className+"Grid-thead",id:t}),this.columns.forEach(function(t,i){n.append(function(t,n){var i=document.createElement("span");return e.attr(i,"style","width:"+t+"px;"),i.innerHTML=n||"",i}(t.width,t.indexName))}),this.element.append(n)},n.prototype._tbody=function(t){var n=this,i=document.createElement("ul");tbodyId="Grid-tbody-"+(new Date).getTime(),e.attr(i,{class:e.className+"Grid-tbody",id:tbodyId}),t.forEach(function(t,i){!function(t){var i=document.createElement("li"),s=document.createElement("span");n.columns.forEach(function(t,n){e.attr(s,"style","width:"+t.width+"px;"),s.innerHTML=t.index||"",i.append(s)})}()}),this.element.append(i)},new n},NewUI.prototype.getProgres=function(t){var e=this,n=function(){this.element=t?e.getElement(t):e.getElement("."+e.className+"Progressbar")[0]};return n.prototype.setValue=function(t){var n=e.children(this.element,"span")[0];t>=0&&t<=100?(n.style="width:"+t+"%;",this.element.setAttribute("data-value",t+"%")):console.warn("Progressbar 设置数值在0～100之间")},new n},NewUI.prototype.getRange=function(){var t=this,e=function(e){this.element=e?t.getElement(e):t.getElement("input[type='range']")[0],this.init()};return e.prototype.change=function(t){t&&(this.callBack=t)},e.prototype.init=function(){var t=this;this.element.addEventListener("change",function(){t.value=this.value,t.callBack&&t.callBack(t)})},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){this.element.value=t},e.prototype.setDisable=function(t){if(t)this.element.setAttribute("disabled","");else{var e=this.element.getAttributeNode("disabled");e&&this.element.removeAttributeNode(e)}},new e},NewUI.prototype.init=function(t){this.defaultConfig={},this.extend(this.defaultConfig,t),this.namaspace="NewUI",this.className=this.namaspace+"-",this.itemsConfig={},this.getInput().init()},NewUI.prototype.getInput=function(t){var e=this,n=function(){this.password=null,this.element=t?document.querySelectorAll(t):document.querySelectorAll("input[type='text']")};return n.prototype.init=function(){var t=document.querySelectorAll(".fa-times-circle"),n=document.querySelectorAll(".fa-eye");t.forEach(function(t,n){t.addEventListener("mousedown",function(){var t=e.prev(this);"text"==t.getAttribute("type")&&(t.value="")})}),n.forEach(function(t,n){t.addEventListener("mousedown",function(){var t=e.prev(this);"password"==t.getAttribute("type")?t.setAttribute("type","text"):t.setAttribute("type","password"),e.hasClass(this,"NewUI-active")?e.removeClass(this,"NewUI-active"):e.addClass(this,"NewUI-active")})}),this.element.forEach(function(t,e){t.addEventListener("blur",function(){var t=this.getAttribute("data-Rex"),e=(this.getAttribute("data-RexText"),this.value);t&&!new RegExp(t).test(e)?this.setAttribute("style","background:#f2f2f2;border:1px solid #f00 !important;"):this.setAttribute("style","")})})},n.prototype.setDisable=function(t){t?this.element.forEach(function(t,e){t.setAttribute("disabled",!0),t.setAttribute("style","background:none;")}):this.element.forEach(function(t,e){t.setAttribute("disabled",!1),t.setAttribute("style","background:#f2f2f2;")})},new n},NewUI.prototype.getSwitch=function(t){var e=this,n=function(t){t&&(this.element=t,this.width=t.offsetWidth,this.height=t.offsetHeight,this.active=!1,this.callBack=function(){},this.init())};if(n.prototype.init=function(){var t=this.element;t.getAttribute("class").indexOf(e.className+"switch-active")>0&&(t.setAttribute("data-active","1"),this.active=!0),this.initEvent()},n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.getElement=function(){return this.element},n.prototype.off=function(){var t=this;e.hasClass(t.element,e.className+"switch-active")&&(e.removeClass(t.element,e.className+"switch-active"),e.children(t.element,e.className+"switch-handle").forEach(function(e){e.setAttribute("style","transform:translate(0,0);"),t.active=!1})),t.callBack(t)},n.prototype.on=function(){var t=this;e.hasClass(t.element,e.className+"switch-active")||(e.addClass(t.element,e.className+"switch-active"),e.children(t.element,e.className+"switch-handle").forEach(function(e){e.setAttribute("style","transform:translate("+(t.width-30)+"px,0);"),t.active=!0})),t.callBack(t)},n.prototype.initEvent=function(){var t=this;this.element.addEventListener("mousedown",function(){t.active?t.off():t.on()})},n.prototype.toggle=function(t){t&&(this.callBack=t)},n.prototype.getStatus=function(){return this.active},t&&t.indexOf("#")>=0)return new n(document.querySelector(t));var i=[];return(t?document.querySelectorAll(t):e.getByClassName("switch")).forEach(function(t,e){i.push(new n(t))}),i};